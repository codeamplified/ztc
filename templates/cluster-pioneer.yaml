# yaml-language-server: $schema=../schema/cluster-schema.json
# Zero Touch Cluster Configuration - Pioneer Template
# Optimized for: 1-4 nodes, learning and experimentation, minimal hardware
# Storage: Local-path only (simple, fast, minimal resource usage)
# Recommended for: First-time users, testing, resource-constrained labs

cluster:
  name: "ztc-pioneer"
  description: "A compact ZTC cluster for exploration and learning"
  version: "1.0.0"

network:
  subnet: "192.168.50.0/24"
  dns:
    enabled: true
    # In this mode, DNS runs on the master node
    server_ip: "192.168.50.10"
    domain: "homelab.lan"
    upstreams:
      - "8.8.8.8"
      - "1.1.1.1"

nodes:
  ssh:
    key_path: "~/.ssh/id_ed25519.pub"
    username: "ubuntu"
    
  cluster_nodes:
    k3s-master:
      ip: "192.168.50.10"
      role: "master"
      resources:
        cpu: "2"
        memory: "4Gi"
    k3s-worker-01:
      ip: "192.168.50.11"
      role: "worker"
      resources:
        cpu: "2"
        memory: "4Gi"
  
  # The storage_node section is intentionally omitted for Pioneer mode.
  # All cluster services run on the defined cluster nodes only.

storage:
  strategy: "local-only"
  default_class: "local-path"
  
  local_path:
    enabled: true
    is_default: true
  
  nfs:
    enabled: false
  
  longhorn:
    enabled: false

components:
  sealed_secrets:
    enabled: true
  
  argocd:
    enabled: true
    namespace: "argocd"
  
  monitoring:
    enabled: true
    namespace: "monitoring"
  
  gitea:
    enabled: true
    namespace: "gitea"
  
  homepage:
    enabled: true
    namespace: "homepage"

workloads:
  auto_deploy_bundles:
    - "starter"

cluster:
  name: "ztc-ha-cluster"
  description: "Production-grade HA cluster with 2 masters and 6 workers"
  version: "1.0.0"
  ha_config:
    enabled: true
    virtual_ip: "192.168.50.30"
    load_balancer:
      type: "kube-vip"
      port: 6443
    etcd_config:
      snapshot_count: 10000
      heartbeat_interval: "100ms"

network:
  subnet: "192.168.50.0/24"
  dns:
    enabled: true
    server_ip: "192.168.50.20"
    domain: "homelab.lan"
    upstreams: ["8.8.8.8", "1.1.1.1"]

nodes:
  ssh:
    key_path: "~/.ssh/id_ed25519.pub"
    username: "ubuntu"
  cluster_nodes:
    k3s-master-01:
      ip: "192.168.50.10"
      role: "master"
      resources:
        cpu: "4"
        memory: "8Gi"
    k3s-master-02:
      ip: "192.168.50.11"
      role: "master"
      resources:
        cpu: "4"
        memory: "8Gi"
    k3s-worker-01:
      ip: "192.168.50.12"
      role: "worker"
      resources:
        cpu: "8"
        memory: "16Gi"
    k3s-worker-02:
      ip: "192.168.50.13"
      role: "worker"
      resources:
        cpu: "8"
        memory: "16Gi"
    k3s-worker-03:
      ip: "192.168.50.14"
      role: "worker"
      resources:
        cpu: "8"
        memory: "16Gi"
    k3s-worker-04:
      ip: "192.168.50.15"
      role: "worker"
      resources:
        cpu: "8"
        memory: "16Gi"
    k3s-worker-05:
      ip: "192.168.50.16"
      role: "worker"
      resources:
        cpu: "8"
        memory: "16Gi"
    k3s-worker-06:
      ip: "192.168.50.17"
      role: "worker"
      resources:
        cpu: "8"
        memory: "16Gi"
  storage_node:
    k8s-storage:
      ip: "192.168.50.20"
      role: "storage"
      resources:
        cpu: "2"
        memory: "8Gi"
        storage: "1Ti"

storage:
  strategy: "longhorn"
  default_class: "longhorn"
  local_path:
    enabled: true
    is_default: false
  nfs:
    enabled: false
  longhorn:
    enabled: true
    replica_count: 3
    storage_class:
      name: "longhorn"
      is_default: true
      reclaim_policy: "Delete"
    settings:
      default_data_path: "/var/lib/longhorn/"

components:
  sealed_secrets:
    enabled: true
  argocd:
    enabled: true
    namespace: "argocd"
  monitoring:
    enabled: true
    namespace: "monitoring"
    components:
      prometheus: true
      grafana: true
      alertmanager: true
    resources:
      prometheus:
        memory_limit: "4Gi"
        storage_size: "50Gi"
      grafana:
        memory_limit: "512Mi"
  gitea:
    enabled: true
    namespace: "gitea"
    features:
      container_registry: true
      actions_runner: true
    resources:
      memory_limit: "1Gi"
      storage_size: "20Gi"
  homepage:
    enabled: true
    namespace: "homepage"
    features:
      service_discovery: true
      cluster_metrics: true

workloads:
  auto_deploy_bundles: ["monitoring", "development"]
  templates:
    default_storage_class: "longhorn"
    default_memory_limit: "512Mi"
    default_cpu_limit: "500m"

deployment:
  phases:
    infrastructure: true
    secrets: true
    networking: true
    storage: true
    system_components: true
    gitops: true
    workloads: true
  options:
    wait_for_ready: true
    timeout_minutes: 20
    retry_failed: true
    backup_on_success: true

advanced:
  ansible:
    inventory_path: "ansible/inventory/hosts.ini"
    vault_password_file: ".ansible-vault-password"
  kubernetes:
    version: "latest"
    container_runtime: "containerd"
  security:
    auto_generate_passwords: true
    password_length: 32
    enable_rbac: true
  backup:
    auto_backup_secrets: true
    backup_location: "."
    retention_days: 30